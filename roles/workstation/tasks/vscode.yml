---
- name: install vscode
  tags:
    - vscode

  become: yes
  block:
  - name: add microsoft signing key
    apt_key:
       url: "{{ ms_repo_key }}"
       state: present

  - name: add vscode repository
    apt_repository:
      repo: "{{ vscode_repo }}"
      filename: vscode
      state: present

  - name: install vscode
    package:
      name: code
      state: present

- name: install vscode extensions
  command: "code --install-extension '{{ item }}'"
  loop: "{{ vscode_extensions }}"
  when: vscode_extensions is defined
